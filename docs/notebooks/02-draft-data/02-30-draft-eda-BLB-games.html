<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Josh Meehl">
<meta name="dcterms.date" content="2024-09-03">
<meta name="description" content="Draft set analysis for Bloomburrow">

<title>Bloomburrow (BLB) Arena Draft Analysis – The Data Mage</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">The Data Mage</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../notebooks/00-intro/00-00-table-of-contents.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../notebooks/00-intro/00-10-introduction.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../notebooks/02-draft-data/02-00-draft-data-intro.html"> 
<span class="menu-text">Set Analysis</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/meehljd/mtg-modeling"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/meehl/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a></li>
  <li><a href="#summary-data" id="toc-summary-data" class="nav-link" data-scroll-target="#summary-data"><span class="header-section-number">2</span> Summary Data</a></li>
  <li><a href="#color-decks" id="toc-color-decks" class="nav-link" data-scroll-target="#color-decks"><span class="header-section-number">3</span> Color Decks</a>
  <ul class="collapse">
  <li><a href="#color-frequency" id="toc-color-frequency" class="nav-link" data-scroll-target="#color-frequency"><span class="header-section-number">3.1</span> Color Frequency</a></li>
  <li><a href="#color-win-rates" id="toc-color-win-rates" class="nav-link" data-scroll-target="#color-win-rates"><span class="header-section-number">3.2</span> Color Win Rates</a></li>
  <li><a href="#win-rate-over-time" id="toc-win-rate-over-time" class="nav-link" data-scroll-target="#win-rate-over-time"><span class="header-section-number">3.3</span> Win Rate over Time</a></li>
  <li><a href="#color-freq-vs-win-rate" id="toc-color-freq-vs-win-rate" class="nav-link" data-scroll-target="#color-freq-vs-win-rate"><span class="header-section-number">3.4</span> Color Freq vs Win Rate</a></li>
  <li><a href="#wedges-vs-shards" id="toc-wedges-vs-shards" class="nav-link" data-scroll-target="#wedges-vs-shards"><span class="header-section-number">3.5</span> Wedges vs Shards</a></li>
  </ul></li>
  <li><a href="#opposing-player-colors" id="toc-opposing-player-colors" class="nav-link" data-scroll-target="#opposing-player-colors"><span class="header-section-number">4</span> Opposing Player Colors</a></li>
  <li><a href="#color-face-offs-2-color-vs-2-color" id="toc-color-face-offs-2-color-vs-2-color" class="nav-link" data-scroll-target="#color-face-offs-2-color-vs-2-color"><span class="header-section-number">5</span> Color Face-Offs (2-Color vs 2-Color)</a></li>
  <li><a href="#color-splash" id="toc-color-splash" class="nav-link" data-scroll-target="#color-splash"><span class="header-section-number">6</span> Color Splash</a></li>
  <li><a href="#player-rank" id="toc-player-rank" class="nav-link" data-scroll-target="#player-rank"><span class="header-section-number">7</span> Player Rank</a>
  <ul class="collapse">
  <li><a href="#ranks-over-time" id="toc-ranks-over-time" class="nav-link" data-scroll-target="#ranks-over-time"><span class="header-section-number">7.1</span> Ranks over Time</a></li>
  <li><a href="#low-vs-high-rank-players" id="toc-low-vs-high-rank-players" class="nav-link" data-scroll-target="#low-vs-high-rank-players"><span class="header-section-number">7.2</span> Low vs High Rank Players</a></li>
  </ul></li>
  <li><a href="#mulligans" id="toc-mulligans" class="nav-link" data-scroll-target="#mulligans"><span class="header-section-number">8</span> Mulligans</a></li>
  <li><a href="#turn-counts" id="toc-turn-counts" class="nav-link" data-scroll-target="#turn-counts"><span class="header-section-number">9</span> Turn Counts</a></li>
  <li><a href="#builds" id="toc-builds" class="nav-link" data-scroll-target="#builds"><span class="header-section-number">10</span> Builds</a></li>
  <li><a href="#starting-player" id="toc-starting-player" class="nav-link" data-scroll-target="#starting-player"><span class="header-section-number">11</span> Starting Player</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">12</span> Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Bloomburrow (BLB) Arena Draft Analysis</h1>
  <div class="quarto-categories">
    <div class="quarto-category">EDA</div>
    <div class="quarto-category">Draft</div>
    <div class="quarto-category">BLB</div>
    <div class="quarto-category">Arena</div>
  </div>
  </div>

<div>
  <div class="description">
    Draft set analysis for Bloomburrow
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Josh Meehl </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 3, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>Drafting in Magic: The Gathering (MTG) is a complex and dynamic format that challenges players to adapt quickly, make strategic decisions, and understand the evolving meta of each new set. In this analysis, we explore the summary and draft data for Bloomburrow, focusing on draft-level insights without diving into individual cards. We use data from Bloomburrow Premier Drafts, recorded from the <a href="17lands.com">17Lands</a> user base in MTG Arena, a best-of-one draft format where players draft in a pool and play until they win 7 games or lose 3. The Bloomburrow set was released in Arena on July 30, 2024.</p>
<p>By examining deck performance, player strategies, and various in-game factors such as mulligans and turn counts, we aim to uncover the key elements that contribute to success in this draft environment. We’ll explore how factors like deck choice, player rank, sideboarding, and the number of turns impact win rates. Additionally, we’ll investigate gameplay differences when players go first versus second and highlight how player behavior evolves throughout a ranked season. Through this analysis, we provide valuable insights to help both seasoned and new drafters make more strategic decisions in the Bloomburrow draft format and beyond.</p>
<p>To see other analyses of MTG draft data, check out the <a href="../../notebooks/02-draft-data/02-00-draft-data-intro.html">Draft Analysis</a> page.</p>
</section>
<section id="summary-data" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Summary Data</h1>
<p>Here we summarize key statistics from the data, reflecting the experiences of 17Lands players.</p>
<ul>
<li>Date Span: 2024-07-30 - 2024-08-18.</li>
<li>Win Rate: 54.7%</li>
<li>Mean Turns per Game: 8.9</li>
<li>Total Drafts: 117,000</li>
<li>Total Games: 680,000</li>
<li>Mean Games per Draft: 5.8</li>
</ul>
</section>
<section id="color-decks" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Color Decks</h1>
<p>We will explore the use and importance of colors in draft decks. We will look at the frequency of color sets in decks, the win rates of color sets, and the win rates of color pairs.</p>
<section id="color-frequency" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="color-frequency"><span class="header-section-number">3.1</span> Color Frequency</h2>
<p>We start by examining the frequency of decks drafted for each color combination in <a href="#fig-n-color-frequency" class="quarto-xref">Figure&nbsp;1</a>. The ten two-color decks are the most common, aligning with the design intent of Bloomburrow, which focuses on ten two-color animal tribes. Mono-color and multi-color decks are far less common.</p>
<div id="cell-fig-n-color-frequency" class="cell" data-execution_count="9">
<div class="cell-output cell-output-display">
<div id="fig-n-color-frequency" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-n-color-frequency-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-n-color-frequency-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-n-color-frequency-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: The rate at which the drafted deck has a given number of main colors.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Since Bloomburrow is designed with 2-color tribal decks in mind, we’ll focus on these pairings. In <a href="#fig-n-two-color-frequency" class="quarto-xref">Figure&nbsp;2</a>, we see the most frequent drafted decks are Black-Green, White-Green, and Red-White. On the other hand, the least drafted are Blue-Black, Blue-Red and White-Blue.</p>
<div id="cell-fig-n-two-color-frequency" class="cell" data-execution_count="11">
<div class="cell-output cell-output-display">
<div id="fig-n-two-color-frequency" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-n-two-color-frequency-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-n-two-color-frequency-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-n-two-color-frequency-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: The rate at which the drafted deck is a given 2-color pair.
</figcaption>
</figure>
</div>
</div>
</div>
<p><a href="#fig-component-color-frequency" class="quarto-xref">Figure&nbsp;3</a> shows the color composition of the decks. Green stands out as the most frequently drafted color, with Black and White also being popular choices. In contrast, Red and Blue are drafted far less frequently.</p>
<p>The average draft use rate per component color is 40.0%.</p>
<div id="cell-fig-component-color-frequency" class="cell" data-execution_count="13">
<div class="cell-output cell-output-display">
<div id="fig-component-color-frequency" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-component-color-frequency-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-component-color-frequency-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-component-color-frequency-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: The rate at which the drafted deck contains a given color in the main deck colors.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Next, we examine the four decks with the largest absolute changes in use between the start and end of the time period, shown in <a href="#fig-color-freq-over-time" class="quarto-xref">Figure&nbsp;4</a>. The White-Green (WG) and White-Black (WB) decks exhibit the largest increases in use, while the Blue-Red (UR) and White-Red (WR) decks show the most significant decreases.</p>
<div id="cell-fig-color-freq-over-time" class="cell" data-execution_count="15">
<div class="cell-output cell-output-display">
<div id="fig-color-freq-over-time" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-color-freq-over-time-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-color-freq-over-time-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-color-freq-over-time-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Frequency of Drafted Decks by Two-Color Pair: This figure shows the rate at which different two-color pairs are drafted, highlighting trends and preferences in deck selection over time.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="color-win-rates" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="color-win-rates"><span class="header-section-number">3.2</span> Color Win Rates</h2>
<p>In addition to analyzing the use rates of the colors, we’ll also examine their win rates. First, we calculate the weighted average win rate, which is 54.7%. As highlighted in the summary section, this win rate suggests that the 17Lands player base performs better than the general draft player base.</p>
<p><a href="#fig-n-color-wins" class="quarto-xref">Figure&nbsp;5</a> presents the win rates for each color combination. While some mono-color decks have notably high win rates, their low use rates suggest that these results may be circumstantial due to small sample sizes.</p>
<div id="cell-fig-n-color-wins" class="cell" data-execution_count="18">
<div class="cell-output cell-output-display">
<div id="fig-n-color-wins" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-n-color-wins-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-n-color-wins-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-n-color-wins-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: The rate at which the drafted deck is a given 2-color pair.
</figcaption>
</figure>
</div>
</div>
</div>
<p>In <a href="#fig-n-two-color-wins" class="quarto-xref">Figure&nbsp;6</a>, we focus on the 2-color decks. The Black-Red Lizards: Opponents Lose Life deck boasts the highest win rate, though it has a relatively low use rate. Meanwhile, the White-Red Rabbits: Go-Wide and Black-Green Squirrels: Forage decks are the most popular and also maintain high win rates.</p>
<div id="cell-fig-n-two-color-wins" class="cell" data-execution_count="20">
<div class="cell-output cell-output-display">
<div id="fig-n-two-color-wins" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-n-two-color-wins-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-n-two-color-wins-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-n-two-color-wins-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: The win rate for each 2-color pair.
</figcaption>
</figure>
</div>
</div>
</div>
<p><a href="#fig-component-color-wins" class="quarto-xref">Figure&nbsp;7</a> shows the win rates for the five primary colors, based on whether they serve as a main component in a deck. For example, the “B” results reflect the win rates for Black in decks such as WB, BG, Mono-Black, and UBR.</p>
<p>The overall average win rate for the data is 54.7%. Decks featuring Black perform the best, achieving a 55.2% win rate. Green and White decks also perform well, with win rates of 55.0% and 54.8%, respectively. On the other hand, decks with Red and Blue underperform, with win rates of 53.8% and 53.2%.</p>
<div id="cell-fig-component-color-wins" class="cell" data-execution_count="22">
<div class="cell-output cell-output-display">
<div id="fig-component-color-wins" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-component-color-wins-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-component-color-wins-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-component-color-wins-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7: The win rate for each given color in the main deck colors.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="win-rate-over-time" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="win-rate-over-time"><span class="header-section-number">3.3</span> Win Rate over Time</h2>
<p>It’s also insightful to observe how the win rates for two-color decks evolve over time. I selected the four decks with the largest absolute changes in win rate between the start and end of the period. In <a href="#fig-color-wins-over-time" class="quarto-xref">Figure&nbsp;8</a>, we see that the White-Red (WR), White-Black (WB), and another White-Red (WR) deck start with high win rates but gradually decline over time. Conversely, the Blue-Red (UR) deck begins with a low win rate but shows an upward trend as time progresses.</p>
<div id="cell-fig-color-wins-over-time" class="cell" data-execution_count="24">
<div class="cell-output cell-output-display">
<div id="fig-color-wins-over-time" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-color-wins-over-time-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-color-wins-over-time-output-1.png" id="fig-color-wins-over-time" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-color-wins-over-time-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;8
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="color-freq-vs-win-rate" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="color-freq-vs-win-rate"><span class="header-section-number">3.4</span> Color Freq vs Win Rate</h2>
<p>Next, let’s compare the use rate to the win rate to see if the player base is well-calibrated in their deck selections based on performance.</p>
<p>In <a href="#fig-wins-vs-freq-2color" class="quarto-xref">Figure&nbsp;9</a>, we observe that most of the two-color decks align along a straight line, indicating a balanced relationship between use rate and win rate, with two notable outliers. The Blue-Red Otters: Non-creature Spells deck underperforms relative to its use rate, suggesting it may be over-selected. In contrast, the Black-Red Lizards: Opponents Lose Life deck is a hidden gem, boasting the highest win rates but being picked less frequently than the average two-color deck.</p>
<p>This under-selection of Black-Red likely stems from the general underperformance of Red, leading many drafters to avoid it unless they secure strong Black-Red cards early. On the other hand, White, Green, and Black perform well, making the BG, WG, and WB decks popular and flexible choices that players can easily pivot to during drafts.</p>
<div id="cell-fig-wins-vs-freq-2color" class="cell" data-execution_count="26">
<div class="cell-output cell-output-display">
<div id="fig-wins-vs-freq-2color" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-wins-vs-freq-2color-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-wins-vs-freq-2color-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-wins-vs-freq-2color-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9: Win Rate vs Use Rate of 2-Color Draft Decks
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="wedges-vs-shards" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="wedges-vs-shards"><span class="header-section-number">3.5</span> Wedges vs Shards</h2>
<p>Magic: The Gathering color theory includes five wedges and five shards. Wedges are three-color decks built around a primary color and its two allies, while shards consist of a primary color and its two enemies. Conventional wisdom suggests that wedges are generally easier to draft than shards.</p>
<p>However, as shown in <a href="#fig-wedge-vs-shards" class="quarto-xref">Figure&nbsp;10</a>, the shards have a slightly higher win rate and use rate compared to the wedges. This finding is somewhat unexpected but the difference is minimal.</p>
<div id="cell-fig-wedge-vs-shards" class="cell" data-execution_count="28">
<div class="cell-output cell-output-display">
<div id="fig-wedge-vs-shards" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-wedge-vs-shards-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-wedge-vs-shards-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-wedge-vs-shards-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;10: The win rate for shards versus wedges.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="opposing-player-colors" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Opposing Player Colors</h1>
<p>We also have data on the opposing player colors, which helps us understand the draft meta. For each draft color combination, we compare the use rate of 17Lands players with that of their opponents. Each combination is color-coded to indicate whether its win rate is above or below the average win rate of the 17Lands player base. A diagonal grey line is included to show parity between the use rates of 17Lands players and the general player base.</p>
<p>In <a href="#fig-player-vs-opp-freq-2color" class="quarto-xref">Figure&nbsp;11</a>, we focus on the two-color drafts. The data reveals that White-Green (WG), Black-Green (BG), and Blue-Green (UG) decks are more favored by 17Lands players and also boast higher win rates. Conversely, the Blue-Black (UB) deck is favored but has a significantly lower win rate. The other color pairs show parity between the two player bases.</p>
<div id="cell-fig-player-vs-opp-freq-2color" class="cell" data-execution_count="30">
<div class="cell-output cell-output-display">
<div id="fig-player-vs-opp-freq-2color" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-player-vs-opp-freq-2color-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-player-vs-opp-freq-2color-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-player-vs-opp-freq-2color-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;11: Use Rate of Players vs Opponents in 2-Color Draft Decks
</figcaption>
</figure>
</div>
</div>
</div>
<p>Looking at the non-2-color drafts in <a href="#fig-player-vs-opp-freq-non-2color" class="quarto-xref">Figure&nbsp;12</a>, we observe that 17Lands players are far less likely to draft any color combination that isn’t a two-color deck. These non-2-color decks generally have lower win rates, with some exceptions in the mono White, Green, and Black decks.</p>
<p>This suggests that if a player is drafting mono White, Green, or Black, they may be better off staying mono rather than adding Blue or Red to create a two-color deck. However, since mono decks are drafted so infrequently, their strong performance might be circumstantial, depending on specific card combinations, and may not represent a consistent advantage across the entire color set.</p>
<div id="cell-fig-player-vs-opp-freq-non-2color" class="cell" data-execution_count="32">
<div class="cell-output cell-output-display">
<div id="fig-player-vs-opp-freq-non-2color" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-player-vs-opp-freq-non-2color-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-player-vs-opp-freq-non-2color-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-player-vs-opp-freq-non-2color-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;12: Use Rate of Players vs Opponents in 2-Color Draft Decks
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="color-face-offs-2-color-vs-2-color" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Color Face-Offs (2-Color vs 2-Color)</h1>
<p>Let’s now compare each pairing of the two-color decks in <a href="#fig-player-vs-opp-2color-freq-heat" class="quarto-xref">Figure&nbsp;13</a>. This comparison provides insights into the strengths and weaknesses of individual decks.</p>
<p>We start by examining the number of games played between each pairing. The rows and columns are sorted by the maximum frequency of player deck pairings, with Black-Green (BG) vs.&nbsp;White-Green (WG) being the most frequent, followed by WG vs.&nbsp;WG matchups. The average number of games played between each pairing is 5,031.</p>
<p>As noted earlier, 17Lands players draft BG, WG, and Blue-Green (UG) decks more frequently than their opponents, while the other color pairs are used at near parity.</p>
<div id="cell-fig-player-vs-opp-2color-freq-heat" class="cell" data-execution_count="78">
<div class="cell-output cell-output-display">
<div id="fig-player-vs-opp-2color-freq-heat" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-player-vs-opp-2color-freq-heat-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-player-vs-opp-2color-freq-heat-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-player-vs-opp-2color-freq-heat-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;13: Use Rate of Players vs Opponents in 2-Color Draft Decks
</figcaption>
</figure>
</div>
</div>
</div>
<p>Next, we examine the pair-wise win rates for players in <a href="#fig-player-vs-opp-2color-wins-heat" class="quarto-xref">Figure&nbsp;14</a>.</p>
<p>The most notable observation is that the 17Lands player base performs well in most matchups, with a significant exception for the Blue-Red (UR) deck. On average, UR matchups underperform by about 4 percentage points compared to similar matchups. Notably, the UR vs.&nbsp;UR matchup is exceptionally low and is the only like-paired matchup with win rates below 50%, indicating less than even odds of winning.</p>
<div id="cell-fig-player-vs-opp-2color-wins-heat" class="cell" data-execution_count="36">
<div class="cell-output cell-output-display">
<div id="fig-player-vs-opp-2color-wins-heat" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-player-vs-opp-2color-wins-heat-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-player-vs-opp-2color-wins-heat-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-player-vs-opp-2color-wins-heat-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;14: Win Rate of Players vs Opponents in 2-Color Draft Decks
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="color-splash" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Color Splash</h1>
<p>Splash colors are 1-3 non-land spell cards of a given color that enhance a deck without significantly diluting its main colors. These splash cards are often very powerful and can provide strategic advantages.</p>
<p>In <a href="#fig-n-color-splash-freq" class="quarto-xref">Figure&nbsp;15</a>, we can see how frequently splashing occurs across different decks.</p>
<div id="cell-fig-n-color-splash-freq" class="cell" data-execution_count="38">
<div class="cell-output cell-output-display">
<div id="fig-n-color-splash-freq" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-n-color-splash-freq-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-n-color-splash-freq-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-n-color-splash-freq-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;15: The frequency of splash colors.
</figcaption>
</figure>
</div>
</div>
</div>
<p>In <a href="#fig-component-splash-freq" class="quarto-xref">Figure&nbsp;16</a>, we observe the frequency of splashing for each color. Blue is the most commonly splashed color, while Green is the least common.</p>
<div id="cell-fig-component-splash-freq" class="cell" data-execution_count="40">
<div class="cell-output cell-output-display">
<div id="fig-component-splash-freq" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-component-splash-freq-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-component-splash-freq-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-component-splash-freq-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;16: The rate at which the drafted deck contains a given splash color.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="player-rank" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Player Rank</h1>
<p>To assess player skill, I plotted the number of wins by player rank. While I don’t have player IDs to track individual performance, this view provides an average performance snapshot of the player base. Additionally, since I cannot track the number of drafts per player, more frequent players will be over-represented in the data.</p>
<p>Although opponent rankings are not available, we can infer that most opponents are of similar rank due to Arena’s draft system, which matches players with similar records. Each ranked season lasts about a month, and ranks experience “rank decay” between seasons. This decay means that at the start of a new season, a player’s rank is lower, requiring them to play more games to regain their previous standing.</p>
<p>Therefore, our snapshot of each rank includes a mix of lower-skill players who have reached their peak at the end of the season and higher-skill players at the start of the season who are climbing back up the ranks.</p>
<p>In <a href="#fig-rank-games" class="quarto-xref">Figure&nbsp;17</a> we see that most drafts are played by players in the Platinum ranks.</p>
<div id="cell-fig-rank-games" class="cell" data-execution_count="42">
<div class="cell-output cell-output-display">
<div id="fig-rank-games" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-rank-games-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-rank-games-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-rank-games-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;17: Drafts Played by Players of Different Ranks.
</figcaption>
</figure>
</div>
</div>
</div>
<p>In <a href="#fig-ranks-win-rate" class="quarto-xref">Figure&nbsp;18</a>, we observe that win rates vary by rank, with higher ranks generally achieving higher win rates. The Bronze rank has by far the lowest win rate, reflecting new or less skilled players. Interestingly, the Silver rank shows the highest win rate, likely due to the influx of Gold and Platinum players who reset to Silver at the start of the season and quickly climb back up the ranks.</p>
<div id="cell-fig-ranks-win-rate" class="cell" data-execution_count="43">
<div class="cell-output cell-output-display">
<div id="fig-ranks-win-rate" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ranks-win-rate-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-ranks-win-rate-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ranks-win-rate-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;18: Win Rate by Players of Different Ranks.
</figcaption>
</figure>
</div>
</div>
</div>
<p>For each rank, I plotted the win rate for the last week of play compared to the earlier timeframe. In <a href="#fig-ranked-win-rate-over-time" class="quarto-xref">Figure&nbsp;19</a>, we see a decline in win rates for higher ranks but an increase in win rates for lower ranks. This pattern suggests that higher ranks may become more competitive as the season progresses, while lower ranks tend to become more casual.</p>
<div id="cell-fig-ranked-win-rate-over-time" class="cell" data-execution_count="45">
<div class="cell-output cell-output-display">
<div id="fig-ranked-win-rate-over-time" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ranked-win-rate-over-time-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-ranked-win-rate-over-time-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ranked-win-rate-over-time-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;19: Win Rate by Players of Different Ranks by Timeframe.
</figcaption>
</figure>
</div>
</div>
</div>
<p><a href="#fig-ranked-n-games" class="quarto-xref">Figure&nbsp;20</a> shows the number of games played per draft for each rank. While not identical, the pattern closely mirrors the previous chart of win rates.</p>
<div id="cell-fig-ranked-n-games" class="cell" data-execution_count="47">
<div class="cell-output cell-output-display">
<div id="fig-ranked-n-games" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ranked-n-games-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-ranked-n-games-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ranked-n-games-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;20: Games Played per Draft by Players of Different Ranks.
</figcaption>
</figure>
</div>
</div>
</div>
<section id="ranks-over-time" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="ranks-over-time"><span class="header-section-number">7.1</span> Ranks over Time</h2>
<p>We then examine the number of drafts played at each rank over time in <a href="#fig-ranked-drafts-over-time" class="quarto-xref">Figure&nbsp;21</a>. Since the BLB set was released two days before the season start, I truncated the data at 08-01 to avoid the effects of rank decay.</p>
<p>The initial days are chaotic, with the BLB set launching on 07-30, and 07-31 being the first full day of recorded games. On 08-01, the new ranked season began, causing rank decay, which is especially noticeable in Mythic and Diamond gameplay.</p>
<p>Starting on 08-01, we observe distinct patterns: Gold rapidly declines after an initial peak of 3,800 drafts per day. Platinum peaks during days 4-6 before dropping. Diamond shows a slower climb with a plateau between days 8-13, followed by a gradual decline. Mythic starts at zero and slowly climbs, reaching a peak of 500 drafts per day around days 13-16.</p>
<p>From this chart, it’s unclear how much of the decline at each rank is due to player advancement versus a loss of interest after the initial excitement of a new season. In the following charts, I will normalize the data to the total drafts played to better account for the overall decrease in gameplay.</p>
<div id="cell-75" class="cell" data-execution_count="49">
<div class="cell-output cell-output-stdout">
<pre><code>Total Time Interval: 19 days 00:00:00</code></pre>
</div>
</div>
<div id="cell-fig-ranked-drafts-over-time" class="cell" data-execution_count="50">
<div class="cell-output cell-output-display">
<div id="fig-ranked-drafts-over-time" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ranked-drafts-over-time-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-ranked-drafts-over-time-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ranked-drafts-over-time-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21: Drafts Played by Players Over Time, by Player rank.
</figcaption>
</figure>
</div>
</div>
</div>
<p>In <a href="#fig-ranked-total-drafts-over-time" class="quarto-xref">Figure&nbsp;22</a>, we see the number of drafts played over time. It’s notable that the release of BLB and the start of the new season coincided, driving high player interest, with a peak of 11,300 drafts on 07-31. The rate of play decayed over the weeks, reaching a low of 3,100 on 08-17.</p>
<p>The decline is nearly monotonic, with slight increases on the Saturdays of 08-04 and 08-11, indicating that weekly seasonality has only a minor impact.</p>
<p>Releasing new sets clearly boosts player engagement. However, the introduction of the new season on 08-01 does not appear to have significantly increased play, though this observation is tentative. This data highlights the economic motivation for releasing new sets to drive digital engagement on Arena, and it’s likely that paper play would follow a similar trend, with increased draft activity consuming more booster packs in the weeks following a new set’s launch.</p>
<p>It would be valuable to compare this pattern across different set releases to better understand the player base’s set-by-set preferences.</p>
<div id="cell-fig-ranked-total-drafts-over-time" class="cell" data-execution_count="52">
<div class="cell-output cell-output-display">
<div id="fig-ranked-total-drafts-over-time" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ranked-total-drafts-over-time-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-ranked-total-drafts-over-time-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ranked-total-drafts-over-time-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;22: Total Drafts Played by Players Over Time.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Next, we normalize for the total games played to observe the relative ranked play across the player base, as shown in <a href="#fig-normalized-ranked-drafts-over-time" class="quarto-xref">Figure&nbsp;23</a>.</p>
<p>This normalization highlights the relative activity at each rank more clearly. After the season starts, Gold exhibits a linear decay as players progress to Platinum. Platinum maintains a prolonged plateau, indicating a balance between new players entering the rank and existing players advancing.</p>
<p>Diamond and Mythic both start with minimal participation but gradually increase in play almost monotonically, albeit at different rates.</p>
<div id="cell-fig-normalized-ranked-drafts-over-time" class="cell" data-execution_count="54">
<div class="cell-output cell-output-display">
<div id="fig-normalized-ranked-drafts-over-time" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-normalized-ranked-drafts-over-time-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-normalized-ranked-drafts-over-time-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-normalized-ranked-drafts-over-time-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;23: Normalized Drafts Played by Players of Different Ranks Over Time.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="low-vs-high-rank-players" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="low-vs-high-rank-players"><span class="header-section-number">7.2</span> Low vs High Rank Players</h2>
<p>Now, let’s compare player rank performance against success by focusing on the three two-color decks that were outliers in the previous use-rate versus win-rate chart.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Deck</th>
<th>Use Rate</th>
<th>Win Rate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>BG</td>
<td>High</td>
<td>High</td>
</tr>
<tr class="even">
<td>BR</td>
<td>Low</td>
<td>High</td>
</tr>
<tr class="odd">
<td>UR</td>
<td>Very Low</td>
<td>Extremely Low</td>
</tr>
</tbody>
</table>
<p>In <a href="#fig-top-decks-by-rank" class="quarto-xref">Figure&nbsp;24</a>, we analyze the overall performance of players using these decks, categorized by the week of play and whether the player is in the elite ranks of Diamond or Mythic.</p>
<p>For BG, the most played deck, performance across weeks and ranks shows no clear trend. However, for the BR and UR decks, which are less frequently played, players in both elite ranks demonstrated noticeable improvements in win rates from week one to week two. This suggests that the 17Lands player base adapted and learned to optimize these less favorable decks, regardless of their rank.</p>
<p>It’s important to note that during the first week of play, the Mythic and Diamond player base is relatively small.</p>
<div id="cell-fig-top-decks-by-rank" class="cell" data-execution_count="56">
<div class="cell-output cell-output-display">
<div id="fig-top-decks-by-rank" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-top-decks-by-rank-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-top-decks-by-rank-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-top-decks-by-rank-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;24: Win Rate for given color decks for top-ranked players vs others.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="mulligans" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Mulligans</h1>
<p>Mulligans are a crucial strategy in MTG. If a player’s starting hand is not ideal, they can draw a new one, each time with one fewer card. This process can be repeated as needed, creating a challenging trade-off between a poor hand and a smaller one.</p>
<p>In <a href="#fig-mulligan-distro" class="quarto-xref">Figure&nbsp;25</a>, we observe the distribution of mulligans by the number of re-draws. Most players do not take a mulligan; about 12% take one mulligan, and 2% take two. Very few players take three or more mulligans, with only two instances of a player taking five mulligans, resulting in a starting hand of just two cards.</p>
<p>We also see that 17Lands players are slightly less likely to take mulligans compared to their opponents, likely due to a combination of superior deck construction and more informed mulligan decisions.</p>
<div id="cell-fig-mulligan-distro" class="cell" data-execution_count="58">
<div class="cell-output cell-output-display">
<div id="fig-mulligan-distro" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mulligan-distro-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-mulligan-distro-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mulligan-distro-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;25: Distribution of Mulligans.
</figcaption>
</figure>
</div>
</div>
</div>
<p>A side note on probability distributions: the player mulligan distributions appear to resemble Poisson distributions, with the number of mulligans taken being a discrete event.</p>
<p>Using the mean number of mulligans per game, 0.136, I performed random sampling from a Poisson distribution with <span class="math inline">\(\lambda=0.136\)</span>. The results, shown in <a href="#fig-mulligan-poisson" class="quarto-xref">Figure&nbsp;26</a>, closely match the actual data, though the real data shows a slightly higher number of games with one mulligan and slightly fewer for other values.</p>
<p>We can further investigate this pattern when we explore the card data to identify random draw events that correlate with mulligan decisions, such as the number of lands in the starting hand.</p>
<div id="cell-fig-mulligan-poisson" class="cell" data-execution_count="60">
<div class="cell-output cell-output-display">
<div id="fig-mulligan-poisson" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mulligan-poisson-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-mulligan-poisson-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mulligan-poisson-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;26: Distribution of Player Mulligans vs Poisson Distribution.
</figcaption>
</figure>
</div>
</div>
</div>
<p>We now examine the outcomes of games where mulligans occur. In <a href="#fig-player-vs-opponent-mulligan-wins" class="quarto-xref">Figure&nbsp;27</a>, we see a clear near-linear relationship between the number of mulligans and win rates, with win rates decreasing by approximately 15% for each mulligan taken.</p>
<p>When comparing 17Lands players to their opponents, the rate of win decay is consistent, maintaining an 8-9% gap in favor of 17Lands players at each mulligan level.</p>
<p>This data does not reveal the causal relationship between mulligans and win rates. It’s unclear whether mulligans are inherently detrimental or simply indicative of bad starting hands that would have had an even lower probability of winning. This question could be further explored using card data to assess the quality of starting hands that led to mulligans.</p>
<div id="cell-fig-player-vs-opponent-mulligan-wins" class="cell" data-execution_count="62">
<div class="cell-output cell-output-display">
<div id="fig-player-vs-opponent-mulligan-wins" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-player-vs-opponent-mulligan-wins-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-player-vs-opponent-mulligan-wins-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-player-vs-opponent-mulligan-wins-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;27: Win Rates for Players and Opponents by Mulligans.
</figcaption>
</figure>
</div>
</div>
</div>
<p>To determine if mulligan success varies by player rank, I plotted the win rates for each rank in <a href="#fig-mulligan-win-rate-by-rank" class="quarto-xref">Figure&nbsp;28</a>. The results show that win rates are very similar across all ranks, with no significant differences observed.</p>
<div id="cell-fig-mulligan-win-rate-by-rank" class="cell" data-execution_count="64">
<div class="cell-output cell-output-display">
<div id="fig-mulligan-win-rate-by-rank" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mulligan-win-rate-by-rank-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-mulligan-win-rate-by-rank-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mulligan-win-rate-by-rank-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;28: Win Rates of Mulligans by Player Rank.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="turn-counts" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Turn Counts</h1>
<p>The number of turns in a game is an important metric for assessing the speed of a set. In <a href="#fig-turns-per-game" class="quarto-xref">Figure&nbsp;29</a>, we see the distribution of turn counts for the Bloomburrow set, with an average of 8.9 turns per game.</p>
<p>Similar to the distribution seen in <a href="#fig-mulligan-poisson" class="quarto-xref">Figure&nbsp;26</a>, this turn distribution appears to resemble a Poisson distribution.</p>
<div id="cell-fig-turns-per-game" class="cell" data-execution_count="66">
<div class="cell-output cell-output-display">
<div id="fig-turns-per-game" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-turns-per-game-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-turns-per-game-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-turns-per-game-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;29: The distribution of number of turns per game.
</figcaption>
</figure>
</div>
</div>
</div>
<p>I’m also interested in how 17Lands players perform relative to the number of turns. In <a href="#fig-turns-wins" class="quarto-xref">Figure&nbsp;30</a>, we observe that players are more likely to win games that end quickly. The win rate is 55-60% for games that conclude in fewer than 8 turns, dropping to 50-55% for games that last longer.</p>
<div id="cell-fig-turns-wins" class="cell" data-execution_count="67">
<div class="cell-output cell-output-display">
<div id="fig-turns-wins" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-turns-wins-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-turns-wins-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-turns-wins-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;30: The win rate versus number of turns.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="builds" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> Builds</h1>
<p>A player can rebuild their deck between games by utilizing their sideboard during a draft session. I wanted to explore how often players rebuild their decks and whether this impacts win rate. This analysis focuses on premier draft, a best-of-one format, where there is less incentive to rebuild a deck compared to a best-of-three format.</p>
<p>In <a href="#fig-n-games-rebuilds" class="quarto-xref">Figure&nbsp;31</a>, we see that over 75% of draft sessions use the same deck build throughout. Only a tiny fraction of sessions feature more than two different builds.</p>
<div id="cell-fig-n-games-rebuilds" class="cell" data-execution_count="69">
<div class="cell-output cell-output-display">
<div id="fig-n-games-rebuilds" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-n-games-rebuilds-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-n-games-rebuilds-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-n-games-rebuilds-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;31: The proportion of games for the number of rebuilds.
</figcaption>
</figure>
</div>
</div>
</div>
<p>In <a href="#fig-rebuilds-wins" class="quarto-xref">Figure&nbsp;32</a>, we observe the relationship between win rate and the number of rebuilds. Decks with more rebuilds tend to have lower win rates, but it’s unclear whether players are rebuilding more to salvage a poorly drafted deck or if rebuilding itself is a suboptimal strategy.</p>
<div id="cell-fig-rebuilds-wins" class="cell" data-execution_count="71">
<div class="cell-output cell-output-display">
<div id="fig-rebuilds-wins" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-rebuilds-wins-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-rebuilds-wins-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-rebuilds-wins-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;32: The win rate for a number of deck rebuilds.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="starting-player" class="level1" data-number="11">
<h1 data-number="11"><span class="header-section-number">11</span> Starting Player</h1>
<p>To assess the impact of going first or second, I plotted the win rates for each scenario. As shown in <a href="#fig-starting-win-rate" class="quarto-xref">Figure&nbsp;33</a>, the win rate is significantly higher for the player who starts, with nearly a 7% advantage.</p>
<div id="cell-fig-starting-win-rate" class="cell" data-execution_count="73">
<div class="cell-output cell-output-display">
<div id="fig-starting-win-rate" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-starting-win-rate-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-30-draft-eda-BLB-games_files/figure-html/fig-starting-win-rate-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-starting-win-rate-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;33: The win rate for starting versus non-starting player.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="conclusion" class="level1" data-number="12">
<h1 data-number="12"><span class="header-section-number">12</span> Conclusion</h1>
<p>This analysis of the Bloomburrow draft data provides valuable insights into the dynamics of deck performance, player strategies, and overall gameplay within the set. Key findings include the strong influence of deck choice and mulligan decisions on win rates, the advantages of starting first, and the nuanced impact of rebuilding decks during draft sessions. We observed that players often align closely with expected use rates and win rates, but there are clear areas where player behavior diverges, such as the under-selection of high-performing but less popular decks like Black-Red.</p>
<p>The data suggests that set release timing, player rank progression, and strategic decisions such as mulligan frequency and rebuilding all play significant roles in shaping the draft meta. While certain trends, such as the consistent advantage of starting first, are clear, other factors like the impact of sideboarding and deck rebuilding require further exploration, particularly through a deeper analysis of card-level data.</p>
<p>Ultimately, understanding these patterns can help players refine their drafting and gameplay strategies, making more informed decisions to enhance their success in both digital and paper formats. Future work could focus on comparing these trends across different set releases to identify broader shifts in player behavior and preferences.</p>


</section>

</main> <!-- /main -->
<footer style="text-align: center; padding: 10px 0; font-size: 0.8em; color: #666;">
    © <span id="current-year"></span> Joshua Meehl. All rights reserved. This website is unofficial Fan Content permitted under the Fan Content Policy of Wizards of the Coast. It is not
    sponsored, endorsed, or affiliated with Wizards of the Coast.
</footer>
<script>
    const baseYear = 2024;
    const currentYear = new Date().getFullYear();
    const displayYear = currentYear > baseYear ? `${baseYear}-${currentYear}` : `${baseYear}`;
    document.getElementById('current-year').textContent = displayYear;
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>